(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function(t,e,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):e[t]=n()}("qwery",this,function(){function t(){this.c={}}function e(t){return U.g(t)||U.s(t,"(^|\\s+)"+t+"(\\s+|$)",1)}function n(t,e){for(var n=0,r=t.length;r>n;n++)e(t[n])}function r(t){for(var e=[],n=0,r=t.length;r>n;++n)m(t[n])?e=e.concat(t[n]):e[e.length]=t[n];return e}function i(t){for(var e=0,n=t.length,r=[];n>e;e++)r[e]=t[e];return r}function u(t){for(;(t=t.previousSibling)&&1!=t[D];);return t}function o(t){return t.match(J)}function c(t,n,r,i,u,o,c,s,a,l,g){var h,p,m,d,w;if(1!==this[D])return!1;if(n&&"*"!==n&&this[q]&&this[q].toLowerCase()!==n)return!1;if(r&&(p=r.match(R))&&p[1]!==this.id)return!1;if(r&&(w=r.match(B)))for(h=w.length;h--;)if(!e(w[h].slice(1)).test(this.className))return!1;if(a&&v.pseudos[a]&&!v.pseudos[a](this,g))return!1;if(i&&!c){d=this.attributes;for(m in d)if(Object.prototype.hasOwnProperty.call(d,m)&&(d[m].name||m)==u)return this}return i&&!f(o,Z(this,u)||"",c)?!1:this}function s(t){return V.g(t)||V.s(t,t.replace(_,"\\$1"))}function f(t,e,n){switch(t){case"=":return e==n;case"^=":return e.match(W.g("^="+n)||W.s("^="+n,"^"+s(n),1));case"$=":return e.match(W.g("$="+n)||W.s("$="+n,s(n)+"$",1));case"*=":return e.match(W.g(n)||W.s(n,s(n),1));case"~=":return e.match(W.g("~="+n)||W.s("~="+n,"(?:^|\\s+)"+s(n)+"(?:\\s+|$)",1));case"|=":return e.match(W.g("|="+n)||W.s("|="+n,"^"+s(n)+"(-|$)",1))}return 0}function a(t,e){var r,i,u,s,f,a,l,h=[],p=[],m=e,d=X.g(t)||X.s(t,t.split(G)),v=t.match(k);if(!d.length)return h;if(s=(d=d.slice(0)).pop(),d.length&&(u=d[d.length-1].match(C))&&(m=w(e,u[1])),!m)return h;for(a=o(s),f=m!==e&&9!==m[D]&&v&&/^[+~]$/.test(v[v.length-1])?function(t){for(;m=m.nextSibling;)1==m[D]&&(a[1]?a[1]==m[q].toLowerCase():1)&&(t[t.length]=m);return t}([]):m[E](a[1]||"*"),r=0,i=f.length;i>r;r++)(l=c.apply(f[r],a))&&(h[h.length]=l);return d.length?(n(h,function(t){g(t,d,v)&&(p[p.length]=t)}),p):h}function l(t,e,n){if(h(e))return t==e;if(m(e))return!!~r(e).indexOf(t);for(var i,u,s=e.split(",");e=s.pop();)if(i=X.g(e)||X.s(e,e.split(G)),u=e.match(k),i=i.slice(0),c.apply(t,o(i.pop()))&&(!i.length||g(t,i,u,n)))return!0;return!1}function g(t,e,n,r){function i(t,r,s){for(;s=K[n[r]](s,t);)if(h(s)&&c.apply(s,o(e[r]))){if(!r)return s;if(u=i(s,r-1,s))return u}}var u;return(u=i(t,e.length-1,t))&&(!r||Y(u,r))}function h(t,e){return t&&"object"==typeof t&&(e=t[D])&&(1==e||9==e)}function p(t){var e,n,r=[];t:for(e=0;e<t.length;++e){for(n=0;n<r.length;++n)if(r[n]==t[e])continue t;r[r.length]=t[e]}return r}function m(t){return"object"==typeof t&&isFinite(t.length)}function d(t){return t?"string"==typeof t?v(t)[0]:!t[D]&&m(t)?t[0]:t:b}function w(t,e,n){return 9===t[D]?t.getElementById(e):t.ownerDocument&&((n=t.ownerDocument.getElementById(e))&&Y(n,t)&&n||!Y(t,t.ownerDocument)&&$('[id="'+e+'"]',t)[0])}function v(t,e){var n,u,o=d(e);if(!o||!t)return[];if(t===window||h(t))return!e||t!==window&&h(o)&&Y(t,o)?[t]:[];if(t&&m(t))return r(t);if(n=t.match(M)){if(n[1])return(u=w(o,n[1]))?[u]:[];if(n[2])return i(o[E](n[2]));if(te&&n[3])return i(o[x](n[3]))}return $(t,o)}function y(t,e){return function(n){var r,i;return P.test(n)?void(9!==t[D]&&((i=r=t.getAttribute("id"))||t.setAttribute("id",i="__qwerymeupscotty"),n='[id="'+i+'"]'+n,e(t.parentNode||t,n,!0),r||t.removeAttribute("id"))):void(n.length&&e(t,n,!1))}}var $,b=document,N=b.documentElement,x="getElementsByClassName",E="getElementsByTagName",A="querySelectorAll",S="useNativeQSA",q="tagName",D="nodeType",R=/#([\w\-]+)/,B=/\.[\w\-]+/g,C=/^#([\w\-]+)$/,j=/^\.([\w\-]+)$/,L=/^([\w\-]+)$/,O=/^([\w]+)?\.([\w\-]+)$/,P=/(^|,)\s*[>~+]/,T=/^\s+|\s*([,\s\+\~>]|$)\s*/g,I=/[\s\>\+\~]/,Q=/(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/,_=/([.*+?\^=!:${}()|\[\]\/\\])/g,z=/^(\*|[a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/,F=/\[([\w\-]+)(?:([\|\^\$\*\~]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/,H=/:([\w\-]+)(\(['"]?([^()]+)['"]?\))?/,M=new RegExp(C.source+"|"+L.source+"|"+j.source),k=new RegExp("("+I.source+")"+Q.source,"g"),G=new RegExp(I.source+Q.source),J=new RegExp(z.source+"("+F.source+")?("+H.source+")?"),K={" ":function(t){return t&&t!==N&&t.parentNode},">":function(t,e){return t&&t.parentNode==e.parentNode&&t.parentNode},"~":function(t){return t&&t.previousSibling},"+":function(t,e,n,r){return t?(n=u(t))&&(r=u(e))&&n==r&&n:!1}};t.prototype={g:function(t){return this.c[t]||void 0},s:function(t,e,n){return e=n?new RegExp(e):e,this.c[t]=e}};var U=new t,V=new t,W=new t,X=new t,Y="compareDocumentPosition"in N?function(t,e){return 16==(16&e.compareDocumentPosition(t))}:"contains"in N?function(t,e){return e=9===e[D]||e==window?N:e,e!==t&&e.contains(t)}:function(t,e){for(;t=t.parentNode;)if(t===e)return 1;return 0},Z=function(){var t=b.createElement("p");return(t.innerHTML='<a href="#x">x</a>')&&"#x"!=t.firstChild.getAttribute("href")?function(t,e){return"class"===e?t.className:"href"===e||"src"===e?t.getAttribute(e,2):t.getAttribute(e)}:function(t,e){return t.getAttribute(e)}}(),te=!!b[x],ee=b.querySelector&&b[A],ne=function(t,e){var r,u,o=[];try{return 9!==e[D]&&P.test(t)?(n(r=t.split(","),y(e,function(t,e){u=t[A](e),1==u.length?o[o.length]=u.item(0):u.length&&(o=o.concat(i(u)))})),r.length>1&&o.length>1?p(o):o):i(e[A](t))}catch(c){}return re(t,e)},re=function(t,r){var i,u,o,c,s,f,l=[];if(t=t.replace(T,"$1"),u=t.match(O)){for(s=e(u[2]),i=r[E](u[1]||"*"),o=0,c=i.length;c>o;o++)s.test(i[o].className)&&(l[l.length]=i[o]);return l}return n(f=t.split(","),y(r,function(t,e,n){for(s=a(e,t),o=0,c=s.length;c>o;o++)(9===t[D]||n||Y(s[o],r))&&(l[l.length]=s[o])})),f.length>1&&l.length>1?p(l):l},ie=function(t){"undefined"!=typeof t[S]&&($=t[S]&&ee?ne:re)};return ie({useNativeQSA:!0}),v.configure=ie,v.uniq=p,v.is=l,v.pseudos={},v});
},{}],2:[function(require,module,exports){
!function(t,n,r){"undefined"!=typeof module&&module.exports?module.exports=r():"function"==typeof define&&define.amd?define(r):n[t]=r()}("traversty",this,function(){var t=this,n=t.traversty,r=window.document,e=r.documentElement,i=Object.prototype.toString,o=Array.prototype,u=o.slice,c=function(t,n,r,e,i){for(;e<n.length;)if(t[i=n[e++]+r])return i}(e,["msM","webkitM","mozM","oM","m"],"atchesSelector",0),s=function(){return!1},l=function(t){return"[object Number]"===i.call(t)},f=function(t){return"[object String]"===i.call(t)},h=function(t){return"[object Function]"===i.call(t)},a=function(t){return void 0===t},p=function(t){return t&&1===t.nodeType},g=function(t,n){return a(t)&&!l(n)?0:l(t)?t:l(n)?n:null},m=function(t){return f(t)?t:"*"},y=function(t,n){return u.call(n.querySelectorAll(t),0)},d=function(t,n){return"*"===t||n[c](t)},v=y,w=d,b=function(t,n){return function(r,e){if(/,/.test(r)){for(var i=[],o=-1,u=e.getElementsByTagName("*");++o<u.length;)p(u[o])&&n(r,u[o])&&i.push(u[o]);return i}return t(r,e)}},S="compareDocumentPosition"in e?function(t,n){return 16==(16&n.compareDocumentPosition(t))}:"contains"in e?function(t,n){return n=9===n.nodeType||n==window?e:n,n!==t&&n.contains(t)}:function(t,n){for(;t=t.parentNode;)if(t===n)return 1;return 0},x=function(t){for(var n,r,e=[],i=-1;++i<t.length;){for(n=-1,r=!1;++n<e.length;)if(e[n]===t[i]){r=!0;break}r||e.push(t[i])}return e},T=function(t,n){for(var r,e,i,o=[],u=0,c=t.length;c>u;)for(e=0,i=(r=n(t[u],u++)).length;i>e;)o.push(r[e++]);return o},E=function(t,n,r,e,i){return e=g(r,e),r=m(r),T(t,function(t,o){var u=e||0,c=[];for(i||(t=t[n]);t&&(null===e||u>=0);)!p(t)||i&&i!==!0&&!i(t,o)||!w(r,t)||null!==e&&0!==u--||(null===e&&"nextSibling"!=n&&"parentNode"!=n?c.unshift(t):c.push(t)),t=t[n];return c})},k=function(t,n,r){return 0>n&&(n=t+n),0>n||n>=t?null:n||0===n?n:r},N=function(t,n){for(var r=[],e=0,i=t.length;i>e;e++)n(t[e],e)&&r.push(t[e]);return r},M=function(t){var n;return p(t)?function(n){return n===t}:"function"==(n=typeof t)?function(n,r){return t.call(n,r)}:"string"==n&&t.length?function(n){return w(t,n)}:s},j=function(t){return function(){return!t.apply(this,arguments)}},q=function(){function e(t){if(this.length=0,t){t=x(t.nodeType||a(t.length)?[t]:t);for(var n=this.length=t.length;n--;)this[n]=t[n]}}function i(t){return new e(f(t)?v(t,r):t)}return e.prototype={down:function(t,n){return n=g(t,n),t=m(t),q(T(this,function(r){var e=v(t,r);return null===n?e:[e[n]]||[]}))},up:function(t,n){return q(E(this,"parentNode",t,n))},parents:function(){return e.prototype.up.apply(this,arguments.length?arguments:["*"])},closest:function(t,n){if(l(t))n=t,t="*";else{if(!f(t))return q([]);l(n)||(n=0)}return q(E(this,"parentNode",t,n,!0))},previous:function(t,n){return q(E(this,"previousSibling",t,n))},next:function(t,n){return q(E(this,"nextSibling",t,n))},siblings:function(t,n){for(var r=this,e=u.call(this,0),i=0,o=e.length;o>i;i++)for(e[i]=e[i].parentNode.firstChild;!p(e[i]);)e[i]=e[i].nextSibling;return a(t)&&(t="*"),q(E(e,"nextSibling",t||"*",n,function(t,n){return t!==r[n]}))},children:function(t,n){return q(E(e.prototype.down.call(this),"nextSibling",t||"*",n,!0))},first:function(){return e.prototype.eq.call(this,0)},last:function(){return e.prototype.eq.call(this,-1)},eq:function(t){return q(this.get(t))},get:function(t){return this[k(this.length,t,0)]},slice:function(t,n){var r=n,e=this.length,i=[];for(t=k(e,Math.max(-this.length,t),0),r=k(0>n?e:e+1,n,e),n=null===r||r>e?0>n?0:e:r;null!==t&&n>t;)i.push(this[t++]);return q(i)},filter:function(t){return q(N(this,M(t)))},not:function(t){return q(N(this,j(M(t))))},has:function(t){return q(N(this,p(t)?function(n){return S(t,n)}:"string"==typeof t&&t.length?function(n){return v(t,n).length}:s))},is:function(t){for(var n=0,r=this.length,e=M(t);r>n;n++)if(e(this[n],n))return!0;return!1},toArray:function(){return o.slice.call(this)},size:function(){return this.length},each:function(t,n){for(var r=0,e=this.length;e>r;r++)t.call(n||this[r],this[r],r,this);return this},push:o.push,sort:o.sort,splice:o.splice},e.prototype.prev=e.prototype.previous,i.aug=function(t){var n,r;for(n in t)r=t[n],"function"==typeof r&&(e.prototype[n]=r)},i.setSelectorEngine=function(t){var n,e,o,u,c,s=r.createElement("p"),l=t.select||t.sel||t;s.innerHTML="<a/><i/><b/>",o=s.firstChild;try{if(u=h(t.matching)?function(n,r){return t.matching([r],n).length>0}:h(t.is)?function(n,r){return t.is(r,n)}:h(t.matchesSelector)?function(n,r){return t.matchesSelector(r,n)}:h(t.match)?function(n,r){return t.match(r,n)}:h(t.matches)?function(n,r){return t.matches(r,n)}:null,u||(n=t("a",s),u=h(n._is)?function(n,r){return t(r)._is(n)}:h(n.matching)?function(n,r){return t(r).matching(n).length>0}:h(n.is)&&!n.is.__ignore?function(n,r){return t(r).is(n)}:h(n.matchesSelector)?function(n,r){return t(r).matchesSelector(n)}:h(n.match)?function(n,r){return t(r).match(n)}:h(n.matches)?function(n,r){return t(r).matches(n)}:null),!u)throw new Error("Traversty: couldn't find selector engine's `matchesSelector`");if(u("x,y",s)||!u("a,p",s))throw new Error("Traversty: couldn't make selector engine's `matchesSelector` work");if(2!==(e=l("b,a",s)).length)throw new Error("Traversty: don't know how to use this selector engine");if(c=e[0]===o?l:b(l,u),2!==(e=c("b,a",s)).length||e[0]!==o)throw new Error("Traversty: couldn't make selector engine work");w=u,v=c}catch(a){throw f(a)?a:new Error("Traversty: error while figuring out how the selector engine works: "+(a.message||a))}finally{s=null}return i},i.noConflict=function(){return t.traversty=n,this},i}();return q});
},{}],3:[function(require,module,exports){
window.log=function o(){if(log.history=log.history||[],log.history.push(arguments),this.console){var l,c=arguments;try{c.callee=o.caller}catch(e){}l=[].slice.call(c),"object"==typeof console.log?log.apply.call(console.log,console,l):console.log.apply(console,l)}};
},{}],4:[function(require,module,exports){
Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,r;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),o=i.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(e&&(n=e),r=0;o>r;){var a;r in i&&(a=i[r],t.call(n,a,r,i)),r++}}),Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";if(void 0===this||null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var r=[],i=arguments.length>=2?arguments[1]:void 0,o=0;n>o;o++)if(o in e){var a=e[o];t.call(i,a,o,e)&&r.push(a)}return r}),"map"in Array.prototype||(Array.prototype.map=function(t,e){for(var n=this.length>>>0,r=Array(n),i=0;n>i;i++)i in this&&(r[i]=t.call(e,this[i],i,this));return r}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),this.Element&&Element.prototype.attachEvent&&!Element.prototype.addEventListener&&function(){function t(t,e){Window.prototype[t]=HTMLDocument.prototype[t]=Element.prototype[t]=e}function e(){e.interval&&document.body&&(e.interval=clearInterval(e.interval),document.dispatchEvent(new CustomEvent("DOMContentLoaded")))}t("addEventListener",function(t,e){var n=this,r=n.addEventListener.listeners=n.addEventListener.listeners||{},i=r[t]=r[t]||[];i.length||n.attachEvent("on"+t,i.event=function(t){var e=n.document&&n.document.documentElement||n.documentElement||{scrollLeft:0,scrollTop:0};t.currentTarget=n,t.pageX=t.clientX+e.scrollLeft,t.pageY=t.clientY+e.scrollTop,t.preventDefault=function(){t.returnValue=!1},t.relatedTarget=t.fromElement||null,t.stopImmediatePropagation=function(){s=!1,t.cancelBubble=!0},t.stopPropagation=function(){t.cancelBubble=!0},t.target=t.srcElement||n,t.timeStamp=+new Date;for(var r,o=0,a=[].concat(i),s=!0;s&&(r=a[o]);++o)for(var l,c=0;l=i[c];++c)if(l==r){l.call(n,t);break}}),i.push(e)}),t("removeEventListener",function(t,e){for(var n,r=this,i=r.addEventListener.listeners=r.addEventListener.listeners||{},o=i[t]=i[t]||[],a=o.length-1;n=o[a];--a)if(n==e){o.splice(a,1);break}!o.length&&o.event&&r.detachEvent("on"+t,o.event)}),t("dispatchEvent",function(t){var e=this,n=t.type,r=e.addEventListener.listeners=e.addEventListener.listeners||{},i=r[n]=r[n]||[];try{return e.fireEvent("on"+n,t)}catch(o){return void(i.event&&i.event(t))}}),Object.defineProperty(Window.prototype,"CustomEvent",{get:function(){var t=this;return function(e,n){var r,i=t.document.createEventObject();i.type=e;for(r in n)"cancelable"==r?i.returnValue=!n.cancelable:"bubbles"==r?i.cancelBubble=!n.bubbles:"detail"==r&&(i.detail=n.detail);return i}}}),e.interval=setInterval(e,1),window.addEventListener("load",e)}(),!this.CustomEvent&&function(){window.CustomEvent=function(t,e){var n;e=e||{bubbles:!1,cancelable:!1,detail:void 0};try{n=document.createEvent("CustomEvent"),n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail)}catch(r){n=document.createEvent("Event"),n.initEvent(t,e.bubbles,e.cancelable),n.detail=e.detail}return n}}(),"document"in self&&!("classList"in document.createElement("_"))&&!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",r=t.Element[n],i=Object,o=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[n].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},s=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(t,e)},c=function(t){for(var e=o.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],r=0,i=n.length;i>r;r++)this.push(n[r]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},u=c[n]=[],f=function(){return new c(this)};if(s[n]=Error[n],u.item=function(t){return this[t]||null},u.contains=function(t){return t+="",-1!==l(this,t)},u.add=function(){var t,e=arguments,n=0,r=e.length,i=!1;do t=e[n]+"",-1===l(this,t)&&(this.push(t),i=!0);while(++n<r);i&&this._updateClassName()},u.remove=function(){var t,e=arguments,n=0,r=e.length,i=!1;do{t=e[n]+"";var o=l(this,t);-1!==o&&(this.splice(o,1),i=!0)}while(++n<r);i&&this._updateClassName()},u.toggle=function(t,e){t+="";var n=this.contains(t),r=n?e!==!0&&"remove":e!==!1&&"add";return r&&this[r](t),!n},u.toString=function(){return this.join(" ")},i.defineProperty){var p={get:f,enumerable:!0,configurable:!0};try{i.defineProperty(r,e,p)}catch(d){-2146823252===d.number&&(p.enumerable=!1,i.defineProperty(r,e,p))}}else i[n].__defineGetter__&&r.__defineGetter__(e,f)}}(self);
},{}],5:[function(require,module,exports){
var UI=require("./ui"),Sockets={socket:null,init:function(){this.makeSocketConnection(),this.Listeners.setup()},makeSocketConnection:function(){var e=window.location.hostname;this.socket=io.connect(e)},Listeners:{setup:function(){Sockets.socket.on("tweet",this.onTweetReceived)},onTweetReceived:function(e){UI.updateSymbol(e.key,e.symbol)}}};module.exports=Sockets;
},{"./ui":6}],6:[function(require,module,exports){
function Zoomer(t){this.setLevels=function(){this.docWidth>1500?(this.levels=6.2,this.verticalTranslate=3e3):this.docWidth>1350?(this.levels=6,this.verticalTranslate=2750):this.docWidth>1250?(this.levels=5.8,this.verticalTranslate=2450):this.docWidth>1150?(this.levels=5.7,this.verticalTranslate=2350):this.docWidth>1050?(this.levels=5.5,this.verticalTranslate=2100):this.docWidth>950?(this.levels=5.35,this.verticalTranslate=1900):this.docWidth>850?(this.levels=5.15,this.verticalTranslate=1700):(this.levels=4.9,this.verticalTranslate=1520)},this.content=t,this.header=$(".page-header")[0],this.body=$("body")[0],this.town=$(".illust-level--town")[0],this.townSymbols=$(".illust-level--symbolsTown")[0],this.house=$(".svg-house")[0],this.carollers=$(".svg-carollers")[0],this.star=$(".svg-star")[0],this.scrolled=0;var s=document.body,e=document.documentElement;this.docHeight=Math.max(s.scrollHeight,s.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight),this.docWidth=e.clientWidth,this.setLevels(),window.addEventListener("scroll",this,!1)}var $=require("traversty"),qwery=require("qwery");$.setSelectorEngine(qwery);var UI={html:$("html")[0],body:$("body")[0],overlay:$(".overlay"),overlayBtn:$(".overlay .btn"),symbolList:$(".symbol-list-wrapper")[0],symbolListBtn:$(".btn-list")[0],scrollActive:!1,supports:{transform3d:!1},init:function(){this.browserSupportChecks(),this.handleZooming(),this.initOverlays(),this.initInfoOverlay(),this.symbolOverlay()},browserSupportChecks:function(){this.html.classList.contains("csstransforms3d")&&(this.supports.transform3d=!0)},initOverlays:function(){var t=0,s=this.overlay.length;for(t;s>t;t++)this.overlayBtn[t].addEventListener("click",function(t){t.preventDefault();var s=this.getAttribute("data-close");$("."+s)[0].classList.add("inactive"),UI.scrollActive=!0,"overlay--intro"===s&&window.scrollTo(0,0)})},initInfoOverlay:function(){var t=$(".page-footer-info")[0];t.addEventListener("click",function(t){t.preventDefault(),UI.hideAllOverlays(),$(".overlay--info")[0].classList.remove("inactive")})},hideAllOverlays:function(){var t=0,s=this.overlay.length;for(t;s>t;t++)this.overlay[t].classList.add("inactive")},symbolOverlay:function(){this.symbolListBtn.addEventListener("click",function(t){t.preventDefault(),UI.hideAllOverlays(),UI.symbolList.classList.remove("inactive","hide"),$("#scroll-proxy")[0].classList.add("inactive"),window.scrollTo(0,0),UI.scrollActive=!1}),$(".btn--close")[0].addEventListener("click",function(t){t.preventDefault(),UI.symbolList.classList.add("inactive"),$("#scroll-proxy")[0].classList.remove("inactive"),UI.scrollActive=!0})},updateSymbol:function(t,s){var e=$(".symbol--"+t+" .symbol-total");if(e.length>0){var i=0,o=e.length;for(i;o>i;i++)e[i].innerHTML=this.numberWithCommas(s.total)}},numberWithCommas:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},handleZooming:function(){var t=$(".illust-container")[0];ZUI=new Zoomer(t),window.scrollTo(0,0)}};Zoomer.prototype.handleEvent=function(t){this[t.type]&&this[t.type](t)},Zoomer.prototype.scroll=function(){UI.scrollActive&&this.recalculatePositions()},Zoomer.prototype.recalculatePositions=function(){var t=350,s=320,e=200,i=80,o=void 0!==window.pageXOffset,l="CSS1Compat"===(document.compatMode||""),r=o?window.pageYOffset:l?document.documentElement.scrollTop:document.body.scrollTop;this.scrolled=r/(this.docHeight-window.innerHeight);var a,n,c;this.checkStates();var h=this.scrolled<.5?this.scrolled:.5,d=Math.pow(3,h*this.levels),v=Math.round(d*s),m=Math.round(d*t),y=Math.round(d*i)-i;if(.5>h){var u=(Math.round(d*e-e),Math.round(v/2+y));UI.supports.transform3d?(a="translate3d(0, 0, 0) scale("+d+")",n="translate3d(-50%, -"+u+"px, 0)",c="translate3d(-"+m/2+"px, -"+u+"px, 0) scale("+d+")"):(a="translate(0, 0) scale("+d+")",n="translate(-50%, -"+u+"px)",c="translate(-"+m/2+"px, -"+u+"px) scale("+d+")")}else{var f=(this.scrolled-.5)/.5,p=f*this.verticalTranslate,u=Math.round(v/2+y-p);UI.supports.transform3d?(a="translate3d(0, 0, 0) scale("+d+")",n="translate3d(-50%, -"+u+"px, 0)"):(a="translate(0, 0) scale("+d+")",n="translate(-50%, -"+u+"px)")}this.town.style.width=m+"px",this.town.style.height=v+"px",this.town.style.WebkitTransform=n,this.town.style.MozTransform=n,this.town.style.msTransform=n,this.town.style.transform=n,this.content.style.WebkitTransform=a,this.content.style.MozTransform=a,this.content.style.msTransform=a,this.content.style.transform=a,this.townSymbols.style.WebkitTransform="scale("+d+")",this.townSymbols.style.MozTransform="scale("+d+")",this.townSymbols.style.msTransform="scale("+d+")",this.townSymbols.style.transform="scale("+d+")"},Zoomer.prototype.checkStates=function(){this.scrolled>0?this.header.classList.add("scaled"):this.header.classList.remove("scaled"),this.scrolled>.15?this.body.classList.add("night"):this.body.classList.remove("night"),this.scrolled<.5?(this.house.classList.remove("inactive"),this.carollers.classList.remove("inactive"),this.star.classList.add("inactive"),this.townSymbols.querySelector(".symbols--inside").classList.add("inactive"),this.townSymbols.querySelector(".symbols--outside").classList.remove("inactive")):(this.house.classList.add("inactive"),this.carollers.classList.add("inactive"),this.star.classList.remove("inactive"),this.townSymbols.querySelector(".symbols--inside").classList.remove("inactive"),this.townSymbols.querySelector(".symbols--outside").classList.add("inactive"))},module.exports=UI;
},{"qwery":1,"traversty":2}],7:[function(require,module,exports){
require("./helpers/log"),require("./helpers/shims");var KO=window.KO={};KO.Sockets=require("./modules/sockets"),KO.UI=require("./modules/ui"),KO.Config={init:function(){KO.UI.init(),KO.Sockets.init()}},KO.Config.init();
},{"./helpers/log":3,"./helpers/shims":4,"./modules/sockets":5,"./modules/ui":6}]},{},[7]);
